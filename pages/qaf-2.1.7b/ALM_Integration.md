---
title: ALM Integration
sidebar: qaf_2_1_7b_sidebar
permalink: qaf-2.1.7b/ALM_Integration.html
folder: qaf_2_1_7b
---

## Dependencies:

1. jersey-client.jar

2. jersey-core.jar
 
## Project Properties Configuration:
<b>Connection toward QC ALM requires following mandatory information that can be provided by setting appropriate property (Mandatory):</b>

|Property|Description|
|---------|---------|
|qc.service.url|QC Service URL for example: http://10.20.30.252:8080/qcbin/|
|qc.user|Valid QC user name|
|qc.pwd|QC user password|
|integration.tool.qc|boolean â€“ to disable/ enable qc integration|
|qc.domain|QC Domain name|
|qc.project|QC Project name|

## Updating Result in ALM:

|Property|Description|
|--------|--------|
|qc.service.url|(Mandatory) QC Service URL, for example: http://10.20.30.252:8080/qcbin/|
|qc.testcase.folder.path|(Mandatory) Default test case folder path where the test case are placed in QC, this folder path can be overridden using annotation on test case|
|qc.testset.name|(Optional) Default set name, this set name can be overridden using annotation on test case, If no set name found (either in property or in annotation) than ISFW will generate one.|
|qc.testset.folder.path|(Mandatory) Default test set folder path, this folder path can be overridden using annotation on test case|
|qc.run.name|(Optional) Set this property only if you want to update result for existing run. If run name not provided, Run will automatically generated by the updater for each execution.|
|qc.timezone|(Optional) Valid time zone string. To set date/ time according to QC instance time zone|
|qc.runname.generator.impl|(Optional) Qualified class name that implements com.infostretch.automation.integration.qc.QCRunNameGenerator interface. It can be used to generate name in custom format for auto-generated set and run name. See Appendix for example|

<b>Note:</b>

 * Create test-set if not exist (First time only): If the set name is not provided then QAS will call QCRunNameGenerator to generate the run name. If set name is provided in property and set not exist then also it will create a set. If required to create a set or to find a set it will look under test set path provided by property.
 * Add test case to test set if required: Test case will be mapped by test case folder path and test case name. Folder path will be lookup from QCTestCase annotation as first priority and from property as second priority. QCTestCase Annotation parameter testCaseFolderPath can also hold property key. This is useful when test cases are not in the same path but still there may be group of the test cases in same path. Test case name will be lookup from QCTestCase annotation parameter testCaseName as first priority and test method name as second priority.
 * In case of data driven test if annotation parameter testCaseName is not provided then it will aspect first argument as test case name or if map provided as parameter then it will look for value of key "tcname".
 * Create run under test set for test case and set result with Status, Assertion/verification log, username, execution date and time, duration, OS.

## Appendix I
<b>Annotation Example</b>
In following case mapping using test case id, that dosen't requires testcase folder path.

```java
@QCTestCase(testCaseId="101")
@Test
public void test_01() {
}
```

```java
@QCTestCase(testCaseName="qc_TC01", testCaseFolderPath="sample/demo", testSetName="Set1", testSetFolderPath="sets/demo")
@Test
public void test_01() {
}
```

In following case method name will be considered as QC test case name. Test case folder path; test set name; test set path will be used from property file.

```java
@Test
public void test_01() {
	//To-Do
}
```

In following example test folder path is custom property.
 
```java
@QCTestCase(testCaseFolderPath="sample.demo")
@Test
public void test_01() {
	//To-Do
}
```

In following case test case result will not be updated to QC. This is useful when there is no test case in QC to map this automated test case.

```java
@QCTestCase(skip=true)
@Test
public void test_01() {
	//To-Do
}
```

<b>Example: QCRunNameGenerator custom implementation.</b>

```java
public class QCRunNameGeneratorImpl implements QCRunNameGenerator {
	@Override
	public String generateRunName() {
	    WebDriverTestBase testbase = new WebDriverTestBase();
	    Capabilities capabilities = testbase.getDriver()
	.getCapabilities();
	    return capabilities.getBrowserName().replaceAll(" ", "").trim()
            	* capabilities.getVersion() + "on"
            	* capabilities.getPlatform().name().replaceAll(" ", "").trim() + "_"+ getTimeStamp();
	}
	 
	@Override
	public String generateSetName() {
	    return StringUtil.createRandomString("Auto_" + getTimeStamp());
	}
	 
	 
	private String getTimeStamp() {
	    DateFormat dateFormat = new SimpleDateFormat("yyyy_MM_dd_HH_mm");
	    return dateFormat.format(new Date());
	}
}
```

<b>Note:</b>
QC rest API doesn't return Entity in query result if the name contains space or "" character. For space issue the work around is provided by framework by retrieve all Entities and find by iterating. But in case of "", the Entity is not return in all entities.

For instance, 
While searching for folder "Subject/Release 2/Release 2 - Regression" QC API doesn't return "Release 2 - Regression" folder entity even when we are requesting for all folder.
So there is one limitation that folder name must not have "-" or "/" char (as we are using / as path separator). 
To come out from such issues QAS supports mapping using TC ID so now can directly map test case using TC ID instead of name and folder path. It works fine.
